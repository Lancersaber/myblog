---
title: page
date: 2019-10-24 16:14:30
categories: JavaScript
tags:
---
# 变量、作用域和内存问题
---

## 基本类型和引用类型的值
&emsp;&emsp;ECMAScript变量可能包含两种不同数据类型的值：基本类型值和引用类型值。
* 基本类型：那些保存在栈内存中的简单数据段，即这种值完全保存在内存中的一个位置。
* 引用类型：那些保存在堆内存中的对象，意思是变量中保存的实际上只是一个指针，这个指针指向内存中的另一个位置，这个位置保存对象
&emsp;&emsp;在将一个值赋给变量时，解析器必须确定这个值是基本类型值还是引用类型值。前面讨论的五种基本数据类型：Undefined,Null,Boolean,Number和string。这五种基本数据类型的值在内存中分别占有固定大小的空间，因此可以把它们的值保存在栈内存中。
&emsp;&emsp;如果赋给变量的是一个引用类型的值，则必须在堆内存中为这个值分配空间。由于这种值的大小不固定，因此不能把它们保存在栈中。但内存地址的大小是固定的，因此可以将内存地址保存在栈内存中。

### 动态属性
&emsp;&emsp;定义基本类型和引用类型值的方式类似：创建一个变量并为该变量赋值。但对不同类型变量的操作则大相径庭。对于引用类型的值，我们可以为其添加属性和方法，也可以改变和删除其属性和方法。
```
var person = new Object();
person.name="Mike";
alert(person.name);
```
如果对象不被销毁或者这个属性不被删除，则这个属性将一直存在。

但是我们不能给基本类型的值添加属性，尽管这样做不会导致任何错误。

### 复制变量值
```
var num1=num2;
```
* 基本类型(num2是基本类型)：拷贝一份副本
* 引用类型(num2是引用类型)：指向同一个地址，一个改变时另一个也会变。

### 传递参数
&emsp;&emsp;ECMAScript中所有的参数都是按值传递的。在向参数传递引用类型的值时，会把这个值在内存中的地址复制给一个局部变量，因此这个局部变量的变化会反应在函数的外部。

### 检测类型
&emsp;&emsp;有时候我们想知道某个对象具体是什么类型的对象，为此，ECMAScript提供了instanceof操作符

## 执行环境及作用域
&emsp;&emsp;执行环境(execution context)是JavaScript中最为重要的一个概念。执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个与之关联的变量对象。环境中定义的所有变量和函数都保存在这个对象中。
额，和Java中的变量的环境差不多。