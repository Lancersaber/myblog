---
title: 引入流
time: 2019-11-09
categories: Java
tags: Java
---

# 引入流
---

## 流是什么?
流是Java Api的新成员，它允许你以声明性方式处理数据集合。简短的定义就是"从支持数据处理操作的源生成的元素序列"。

流的两大特点
* 流水线：很多流操作本身会返回一个流，这样多个操作就可以链接起来，形成一个大的流水线。
* 内部迭代：与使用迭代器显式迭代的集合不同，流的迭代操作是在背后进行的。

一个流只能访问一次，想要访问多次只能重新获取流进行访问。

## 流操作

### 中间操作
诸如filter或sorted等中间操作会返回另一个流。这让多个操作可以连接起来形成一个查询。重要的是，除非流水线上触发一个终端操作，否则中间操作不会执行任何处理---它们很懒。这是因为中间操作一般都可以合并起来，在终端操作时一次性全部处理。

中间操作

操作|类型|返回类型|操作参数|函数描述符
----|----|-------|-------|-------
filter|中间|Stream<T>|Predicate<T>|T->boolean
map|中间|Stream<T>|Function<T,R>|T->R
limit|中间|Stream<T>|      |      
sorted|中间|Stream<T>|Comparator<T>|(T,T)->int
distinct|中间|Stream<T>|        |

终端操作

操作|类型|目的
----|----|-------
foreach|终端|消费流中的每个元素并对其应用Lamada。这一操作一般返回void
count|终端|返回流中的个数，返回long
collect|终端|把流归约成一个集合，比如List,Map,甚至是Integer

## 使用流

### 筛选和切片

### 筛选各异的元素
使用distinct方法，它会去除重复的元素

### 截短流
使用limit(n)方法，会返回一个不超过给定长度的流。

### 跳过元素
使用skip(n)方法，该方法会扔掉前n个元素的流。如果流中的元素不足n个，则返回一个空流

## 映射

### 对流中的每一个元素应用函数
流支持map方法，它会接受一个函数作为参数。这个函数会被应用到每个元素上，并将其映射成一个新的元素。*流中的类型会发生改变*。

## 查找和匹配

另一个常见的数据处理套路是看看数据集中的某些元素是否匹配一个给定的属性。

### 检查谓词是否至少匹配一个元素
anyMatch方法可以回答"流中是否有一个元素能匹配给定的谓词"。

### 检查谓词是否匹配所有元素
allMatch方法

对立方法：noneMatch()

### 查找元素
findAny方法将返回当前流中的任意元素。

### 查找第一个元素
findFirst()

